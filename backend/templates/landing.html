{% load static %}
<!doctype html>
<html lang="ru">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Enroll AI</title>
    <script src="https://cdn.tailwindcss.com"></script>
  </head>
  <body class="bg-[color:var(--bg)] text-[color:var(--text)] antialiased">
    <div class="relative min-h-screen overflow-hidden">
      <div aria-hidden="true" class="pointer-events-none absolute inset-0">
        <div
          class="absolute inset-0"
          style="background: linear-gradient(135deg, var(--bg) 0%, #050b20 45%, rgba(30,75,255,0.18) 100%);"
        ></div>
        <div
          class="absolute -top-48 right-[-8rem] h-96 w-96 rounded-full opacity-60 blur-3xl"
          style="background: radial-gradient(circle at center, rgba(30,75,255,0.35), transparent 70%);"
        ></div>
        <div
          class="absolute left-[-10rem] top-1/3 h-80 w-80 rounded-full opacity-40 blur-3xl"
          style="background: radial-gradient(circle at center, rgba(191,231,255,0.35), transparent 70%);"
        ></div>
      </div>

      <div class="relative z-10 mx-auto flex min-h-screen max-w-7xl flex-col px-6 sm:px-10">
        {% include "landing/nav.html" %}

        <main class="flex flex-col gap-20 pb-20 pt-6 sm:pt-10">
          {% include "landing/hero.html" %}
          {% include "landing/features.html" %}
          {% include "landing/story.html" %}
          {% include "landing/faq.html" %}
          {% include "landing/cta.html" %}
        </main>

        {% include "landing/footer.html" %}
      </div>
    </div>

    <script>
      const LANDING_CONFIG = {
        colors: {
          bg: "#050608",
          panel: "rgba(255,255,255,0.04)",
          border: "rgba(255,255,255,0.10)",
          text: "#F5F7FF",
          muted: "rgba(245,247,255,0.70)",
          accentBlue: "#1E4BFF",
          accentIce: "#BFE7FF",
          accentSilver: "#DCE3EA",
        },
        copy: {
          brand: "ENROLL",
          navProduct: "О продукте",
          navPricing: "Тариф",
          navLogin: "Войти",
          heroTitle: "Поступление в США — по шагам.",
          heroSub:
            "Профиль → дедлайны → документы → черновики для Common App (без интеграции в MVP).",
          heroNote: "Не гарантия поступления. Решение принимает университет.",
          primaryAuthed: "Перейти в Dashboard",
          primaryGuest: "Создать аккаунт",
          secondaryCta: "Войти",
          featuresTitle: "Каталог возможностей",
          featuresHint: "Прокрути →",
          storyTitle: "Почему Enroll",
          faqTitle: "FAQ",
          pricingTitle: "Тариф",
          pricingSub: "MVP доступ. Детали после регистрации.",
          pricingPlanTitle: "MVP доступ",
          pricingPlanText:
            "Базовые функции подготовки: roadmap, дедлайны, документы, черновики.",
          footerPrivacy: "Политика",
          footerTerms: "Условия",
          footerContact: "Контакт",
          footerDisclaimer: "Не гарантия поступления. Решение принимает университет.",
        },
        features: [
          {
            title: "Roadmap поступления",
            subtitle: "Этапы и прогресс.",
            gradient:
              "linear-gradient(135deg, rgba(30,75,255,0.45), rgba(5,6,8,0))",
          },
          {
            title: "Дедлайны и напоминания",
            subtitle: "Всегда в срок.",
            gradient:
              "linear-gradient(135deg, rgba(191,231,255,0.4), rgba(5,6,8,0))",
          },
          {
            title: "Документы и версии",
            subtitle: "Статусы и история.",
            gradient:
              "linear-gradient(135deg, rgba(220,227,234,0.4), rgba(5,6,8,0))",
          },
          {
            title: "Проверка эссе",
            subtitle: "Фидбек и ревизии.",
            gradient:
              "linear-gradient(135deg, rgba(30,75,255,0.3), rgba(5,6,8,0))",
          },
          {
            title: "Подбор университетов",
            subtitle: "Список и приоритет.",
            gradient:
              "linear-gradient(135deg, rgba(191,231,255,0.35), rgba(5,6,8,0))",
          },
          {
            title: "Черновики для Common App",
            subtitle: "Без интеграции в MVP.",
            gradient:
              "linear-gradient(135deg, rgba(220,227,234,0.35), rgba(5,6,8,0))",
          },
        ],
        story: [
          {
            title: "Почему это нужно",
            text: "Хаос дедлайнов и документов превращается в систему с понятным прогрессом.",
          },
          {
            title: "Для кого",
            text: "Для абитуриентов СНГ, которые поступают в США и хотят держать процесс под контролем.",
          },
        ],
        faq: [
          {
            q: "Это гарантия поступления?",
            a: "Нет. Мы даём систему подготовки. Решение принимает университет.",
          },
          {
            q: "Вы заполняете Common App за меня?",
            a: "В MVP — нет. Мы готовим черновики и проверку, ты переносишь в Common App вручную.",
          },
          {
            q: "Сколько времени занимает старт?",
            a: "10–15 минут, чтобы заполнить профиль и получить план.",
          },
        ],
        routes: {
          dashboard: "/dashboard/",
          register: "/register",
          login: "/login",
          privacy: "#",
          terms: "#",
          contact: "mailto:hello@enroll.ai",
        },
      };

      const tokenKey = "enroll_token";

      function applyColors() {
        const root = document.documentElement;
        root.style.setProperty("--bg", LANDING_CONFIG.colors.bg);
        root.style.setProperty("--panel", LANDING_CONFIG.colors.panel);
        root.style.setProperty("--border", LANDING_CONFIG.colors.border);
        root.style.setProperty("--text", LANDING_CONFIG.colors.text);
        root.style.setProperty("--muted", LANDING_CONFIG.colors.muted);
        root.style.setProperty("--accent-blue", LANDING_CONFIG.colors.accentBlue);
        root.style.setProperty("--accent-ice", LANDING_CONFIG.colors.accentIce);
        root.style.setProperty("--accent-silver", LANDING_CONFIG.colors.accentSilver);
      }

      function isAuthed() {
        return Boolean(localStorage.getItem(tokenKey));
      }

      function setText(id, value) {
        const el = document.getElementById(id);
        if (el) el.textContent = value;
      }

      function setLink(id, label, href) {
        const el = document.getElementById(id);
        if (!el) return;
        if (label) el.textContent = label;
        if (href) el.setAttribute("href", href);
      }

      function renderFeatures() {
        const container = document.getElementById("features-strip");
        if (!container) return;
        container.innerHTML = LANDING_CONFIG.features
          .map(
            (item) => `
              <a
                href="${LANDING_CONFIG.routes.dashboard}"
                data-auth-required="true"
                class="group relative min-w-[240px] flex-1 overflow-hidden rounded-2xl border border-[color:var(--border)] bg-[color:var(--panel)] p-5 transition duration-200 hover:-translate-y-1 hover:border-[color:var(--accent-ice)] hover:shadow-[0_0_18px_rgba(191,231,255,0.25)] focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-[color:var(--accent-blue)] focus-visible:ring-offset-2 focus-visible:ring-offset-[#050608]"
              >
                <div
                  class="pointer-events-none absolute inset-0 opacity-70"
                  style="background-image: ${item.gradient};"
                ></div>
                <div class="relative z-10">
                  <p class="text-xs uppercase tracking-[0.2em] text-[color:var(--accent-silver)]">
                    Enroll
                  </p>
                  <h3 class="mt-4 text-lg font-semibold text-white">${item.title}</h3>
                  <p class="mt-2 text-sm text-[color:var(--muted)]">${item.subtitle}</p>
                </div>
              </a>
            `
          )
          .join("");
      }

      function renderStory() {
        const container = document.getElementById("story-grid");
        if (!container) return;
        container.innerHTML = LANDING_CONFIG.story
          .map(
            (item) => `
              <div class="rounded-2xl border border-[color:var(--border)] bg-[color:var(--panel)] p-6">
                <h3 class="text-lg font-semibold text-white">${item.title}</h3>
                <p class="mt-3 text-sm text-[color:var(--muted)]">${item.text}</p>
              </div>
            `
          )
          .join("");
      }

      function renderFaq() {
        const container = document.getElementById("faq-list");
        if (!container) return;
        container.innerHTML = LANDING_CONFIG.faq
          .map(
            (item) => `
              <div class="rounded-2xl border border-[color:var(--border)] bg-[color:var(--panel)] p-5">
                <p class="text-sm font-semibold text-white">${item.q}</p>
                <p class="mt-2 text-sm text-[color:var(--muted)]">${item.a}</p>
              </div>
            `
          )
          .join("");
      }

      function setupCopy() {
        setText("brand-text", LANDING_CONFIG.copy.brand);
        setText("hero-title", LANDING_CONFIG.copy.heroTitle);
        setText("hero-sub", LANDING_CONFIG.copy.heroSub);
        setText("hero-note", LANDING_CONFIG.copy.heroNote);
        setText("features-title", LANDING_CONFIG.copy.featuresTitle);
        setText("features-hint", LANDING_CONFIG.copy.featuresHint);
        setText("story-title", LANDING_CONFIG.copy.storyTitle);
        setText("faq-title", LANDING_CONFIG.copy.faqTitle);
        setText("pricing-title", LANDING_CONFIG.copy.pricingTitle);
        setText("pricing-sub", LANDING_CONFIG.copy.pricingSub);
        setText("pricing-plan-title", LANDING_CONFIG.copy.pricingPlanTitle);
        setText("pricing-plan-text", LANDING_CONFIG.copy.pricingPlanText);
        setText("footer-disclaimer", LANDING_CONFIG.copy.footerDisclaimer);

        setLink("nav-product", LANDING_CONFIG.copy.navProduct);
        setLink("nav-pricing", LANDING_CONFIG.copy.navPricing);
        setLink("nav-login", LANDING_CONFIG.copy.navLogin, LANDING_CONFIG.routes.login);
        setLink("hero-secondary-cta", LANDING_CONFIG.copy.secondaryCta, LANDING_CONFIG.routes.login);
        setLink("footer-privacy", LANDING_CONFIG.copy.footerPrivacy, LANDING_CONFIG.routes.privacy);
        setLink("footer-terms", LANDING_CONFIG.copy.footerTerms, LANDING_CONFIG.routes.terms);
        setLink("footer-contact", LANDING_CONFIG.copy.footerContact, LANDING_CONFIG.routes.contact);
      }

      function setupCtas() {
        const authed = isAuthed();
        const primaryLabel = authed
          ? LANDING_CONFIG.copy.primaryAuthed
          : LANDING_CONFIG.copy.primaryGuest;
        const primaryHref = authed
          ? LANDING_CONFIG.routes.dashboard
          : LANDING_CONFIG.routes.register;

        setLink("nav-primary-cta", primaryLabel, primaryHref);
        setLink("hero-primary-cta", primaryLabel, primaryHref);
        setLink("pricing-cta", primaryLabel, primaryHref);
      }

      function guardAuthLinks() {
        document.querySelectorAll("[data-auth-required='true']").forEach((el) => {
          el.addEventListener("click", (event) => {
            if (!isAuthed()) {
              event.preventDefault();
              window.location.href = LANDING_CONFIG.routes.register;
            }
          });
        });
      }

      function setupReveal() {
        const prefersReduced = window.matchMedia("(prefers-reduced-motion: reduce)").matches;
        const targets = document.querySelectorAll("[data-reveal]");
        targets.forEach((el) => {
          el.classList.add("opacity-0", "translate-y-6", "transition", "duration-700", "ease-out");
        });
        if (prefersReduced) {
          targets.forEach((el) => {
            el.classList.remove("opacity-0", "translate-y-6");
            el.classList.add("opacity-100", "translate-y-0");
          });
          return;
        }
        const observer = new IntersectionObserver(
          (entries) => {
            entries.forEach((entry) => {
              if (entry.isIntersecting) {
                entry.target.classList.add("opacity-100", "translate-y-0");
                entry.target.classList.remove("opacity-0", "translate-y-6");
                observer.unobserve(entry.target);
              }
            });
          },
          { threshold: 0.15 }
        );
        targets.forEach((el) => observer.observe(el));
      }

      document.addEventListener("DOMContentLoaded", () => {
        applyColors();
        setupCopy();
        renderFeatures();
        renderStory();
        renderFaq();
        setupCtas();
        guardAuthLinks();
        setupReveal();
      });
    </script>
  </body>
</html>
